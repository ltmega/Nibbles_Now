<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nibbles Now - Your Snack Delivery</title>
    <link rel="stylesheet" href="/frontend/styles/styles.css">
</head>
<body>
    <header>
        <div class="logo">Nibbles Now</div>
        <nav>
            <ul id="nav-list"></ul>
        </nav>
    </header>

    <main class="homepage">
        <section class="popular-snacks">
            <h2>Popular Snacks</h2>
            <div class="popular-snacks-row" id="popular-snacks-container">
                <!-- JS will inject snack cards here -->
            </div>
            <div class="view-all">
                <a href="/frontend/categories.html" class="button">View More Snacks</a>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 Nibbles Now - Serving Kampala</p>
    </footer>

    <script src="/frontend/js/cart.js"></script>
    <script src="/frontend/js/index.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const navList = document.getElementById('nav-list');
        const userInfo = localStorage.getItem('userInfo');
        let navHtml = `
            <li><a href="/frontend/index.html">Home</a></li>
            <li><a href="/frontend/categories.html">Categories</a></li>
            <li><a href="/frontend/cart.html">Cart (<span id="cart-item-count">0</span>)</a></li>
        `;

        if (userInfo) {
            navHtml += `
                <li><a href="/frontend/user_end/user.html">Dashboard</a></li>
                <li><a href="/frontend/user_end/profile.html">My Profile</a></li>
                <li><a href="#" id="logout-btn">Logout</a></li>
            `;
        } else {
            navHtml += `<li><a href="/frontend/login.html">Login/Register</a></li>`;
        }

        navList.innerHTML = navHtml;

        // Logout functionality
        const logoutBtn = document.getElementById('logout-btn');
        if (logoutBtn) {
            logoutBtn.addEventListener('click', function(e) {
                e.preventDefault();
                localStorage.removeItem('userInfo');
                location.reload();
            });
        }
    });
    </script>
</body>
</html>